(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"31f4":function(e,t,i){"use strict";var s=i("fbb7"),a=i.n(s);a.a},ac25:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"deviceBackbone"}},[i("h6",[e._v("Gestione dispositivi backbone")]),i("h6",[e._v("Sito selezionato "+e._s(e.selectedSiteBackbone.description))]),i("q-table",{attrs:{title:"Siti",data:e.devicesBackbone,columns:e.columnsTableDevices,"row-key":"id",filter:e.deviceFilter,"virtual-scroll":"",pagination:e.initialPagination,"rows-per-page-options":[0],"no-data-label":"nessun risultato","no-results-label":"nessun risultato"},on:{"row-click":e.openDevice},scopedSlots:e._u([{key:"top-right",fn:function(){return[i("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Ricerca"},model:{value:e.deviceFilter,callback:function(t){e.deviceFilter=t},expression:"deviceFilter"}},[i("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"header",fn:function(t){return[i("q-tr",{attrs:{props:t}},[i("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(s){return i("q-th",{key:s.name,attrs:{props:t}},[e._v(e._s(s.label))])}))],2)]}},{key:"body",fn:function(t){return[i("q-tr",{class:t.row.state,attrs:{props:t}},[i("q-td",{attrs:{"auto-width":""}},[i("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:"/img/actions/open.png"},on:{click:function(i){return e.openDevice(t.row)}}}),i("img",{staticStyle:{width:"32px",height:"32px",xfill:"gray"},attrs:{src:"/img/actions/delete.png"},on:{click:function(i){return e.deleteDevice(t.row)}}}),i("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:"/img/actions/eye.svg"},on:{click:function(i){return e.monitorDevice(t.row)}}}),null===t.row.siteBackboneId&&e.selectedSiteBackbone&&e.selectedSiteBackbone.id?[i("h6",[e._v("Non associato ad alcun sito")]),i("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:"/img/actions/plugDevice.png"},on:{click:function(i){return e.plugDeviceinSite(t.row)}}})]:e._e(),null!==t.row.siteBackboneId?[i("h6",[e._v("Associato al sito: "),i("strong",[e._v(e._s(e.sitesBackbone[t.row.siteBackboneId].description))])]),i("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:"/img/actions/unplugDevice.png"},on:{click:function(i){return e.unplugDeviceinSite(t.row)}}})]:e._e()],2),e._l(t.cols,(function(s){return i("q-td",{key:s.name,attrs:{props:t}},[e._v(e._s(s.value))])}))],2)]}}])}),i("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/new.png"},on:{click:e.newDevice}}),i("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/save.png"},on:{click:e.saveDevice}}),i("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/delete.png"},on:{click:e.deleteDevice}}),i("img",{class:e.monitorClassBackground,staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/eye.svg"},on:{click:e.monitorDevice}}),i("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/exit.png"},on:{click:e.exit}}),i("q-form",{ref:"deviceBackboneForm",staticClass:"q-gutter-md"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Descrizione"},model:{value:e.selectedDeviceBackbone.description,callback:function(t){e.$set(e.selectedDeviceBackbone,"description",t)},expression:"selectedDeviceBackbone.description"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Tipo"},model:{value:e.selectedDeviceBackbone.type,callback:function(t){e.$set(e.selectedDeviceBackbone,"type",t)},expression:"selectedDeviceBackbone.type"}})],1),i("div",{staticClass:"col"}),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Produttore"},model:{value:e.selectedDeviceBackbone.vendor,callback:function(t){e.$set(e.selectedDeviceBackbone,"vendor",t)},expression:"selectedDeviceBackbone.vendor"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Modello"},model:{value:e.selectedDeviceBackbone.model,callback:function(t){e.$set(e.selectedDeviceBackbone,"model",t)},expression:"selectedDeviceBackbone.model"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"MAC"},model:{value:e.selectedDeviceBackbone.mac,callback:function(t){e.$set(e.selectedDeviceBackbone,"mac",t)},expression:"selectedDeviceBackbone.mac"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"ipv4"},model:{value:e.selectedDeviceBackbone.ipv4,callback:function(t){e.$set(e.selectedDeviceBackbone,"ipv4",t)},expression:"selectedDeviceBackbone.ipv4"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"ipv6"},model:{value:e.selectedDeviceBackbone.ipv6,callback:function(t){e.$set(e.selectedDeviceBackbone,"ipv6",t)},expression:"selectedDeviceBackbone.ipv6"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Note sul dispositivo",type:"textarea",rows:"5",cols:"20"},model:{value:e.selectedDeviceBackbone.note,callback:function(t){e.$set(e.selectedDeviceBackbone,"note",t)},expression:"selectedDeviceBackbone.note"}})],1)])])],1)},a=[],c=(i("e01a"),{data(){return{selectedSiteBackbone:{},selectedDeviceBackbone:{},sitesBackbone:{},devicesBackbone:[],objDataSection:{},objDataPrimitives:{},deviceFilter:"",initialPagination:{sortBy:"desc",descending:!1,page:2,rowsPerPage:5},columnsTableDevices:[{name:"actions",label:"Azioni"},{name:"description",label:"Descrizione",field:e=>e.description,sortable:!0},{name:"address",label:"Indirizzo",field:e=>e.ipv6?e.ipv6:e.ipv4,sortable:!0},{name:"type",label:"Tipo",field:e=>e.type,sortable:!0},{name:"vendor",label:"Produttore",field:e=>e.vendor,sortable:!0},{name:"model",label:"Modello",field:e=>e.model,sortable:!0},{name:"mac",label:"Mac",field:e=>e.mac,sortable:!0},{name:"note",label:"Note",field:e=>e.note,sortable:!0}]}},computed:{sortOptions(){return this.fields.filter(e=>e.sortable).map(e=>({text:e.label,value:e.key}))},siteDescription(e){return this.sitesBackbone[e.siteBackboneId]}},mounted(){this.getAllSitesBackbone(),this.getAllDevicesBackbone(),this.totalRows=this.devicesBackbone.length,this.selectedSiteBackbone=Object.assign({},this.$store.state.siteBackbone),null==this.selectedSiteBackbone&&(this.selectedSiteBackbone={})},getSnmpParameters(e){const t={txRate:"1.3.6.1.4.1.14988.1.1.1.1.1.2.1",rxRate:"1.3.6.1.4.1.14988.1.1.1.1.1.3.1",strength:"1.3.6.1.4.1.14988.1.1.1.1.1.4.1",ssid:"1.3.6.1.4.1.14988.1.1.1.1.1.5.1",frequency:"1.3.6.1.4.1.14988.1.1.1.1.1.7.1",band:"1.3.6.1.4.1.14988.1.1.1.1.1.8.1"},i=[];for(const s in t)i.push(t[s]);this.$axios.post("/adminarea/deviceBackbone/getSnmpParams",{ip:e.ipv4,oids:i}).then(e=>{"OK"===e.data.status&&(this.snmpParameters=e.data.snmpParameters,this.makeToast(e.data.msg),console.log(this.snmpParameters))}).catch(e=>{console.log(e)})},methods:{monitorDevice(e){e&&("monitored"!==e.state?e.state="monitored":e.state="",this.selectedDeviceBackbone=e,this.saveDevice())},plugDeviceinSite(e){e&&this.selectedSiteBackbone?(this.selectedDeviceBackbone=e,this.selectedDeviceBackbone.siteBackboneId=this.selectedSiteBackbone.id,this.$store.commit("changeDeviceBackbone",Object.assign({},this.selectedDeviceBackbone)),this.saveDevice()):this.makeToast("Seleziona un sito prima di associare i dispositivi")},unplugDeviceinSite(e){e&&this.selectedSiteBackbone&&(this.selectedDeviceBackbone=e,this.selectedDeviceBackbone.siteBackboneId=null,this.$store.commit("changeDeviceBackbone",Object.assign({},this.selectedDeviceBackbone)),this.saveDevice())},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},onFiltered(e){this.totalRows=e.length,this.currentPage=1},getAllSitesBackbone(){this.$axios.post("/adminarea/siteBackbone/getall",{}).then(e=>{"OK"===e.data.status&&e.data.sitesBackbone.forEach(e=>{this.sitesBackbone[e.id]=e})}).catch(e=>{console.log(e)})},getAllDevicesBackbone(){this.$axios.post("/adminarea/deviceBackbone/getall",{}).then(e=>{"OK"===e.data.status&&(this.devicesBackbone=e.data.devicesBackbone,this.totalRows=this.devicesBackbone.length,this.makeToast(e.data.msg))}).catch(e=>{console.log(e)})},getDeviceData(){this.selectedDeviceBackbone=this.$store.state.device,this.parseDeviceObjData()},parseDeviceObjData(){if(this.selectedDeviceBackbone.objData)for(const e in this.selectedDeviceBackbone.objData)"object"===typeof this.selectedDeviceBackbone.objData[e]?this.objDataSection[e]=this.selectedDeviceBackbone.objData[e]:this.objDataPrimitives[e]=this.selectedDeviceBackbone.objData[e]},newDevice(){this.$axios.post("/adminarea/deviceBackbone/insert",{deviceBackbone:this.selectedDeviceBackbone}).then(e=>{"OK"===e.data.status?(this.selectedDeviceBackbone=e.data.deviceBackbone,this.$store.commit("changeDeviceBackbone",Object.assign({},this.selectedDeviceBackbone)),this.devicesBackbone=[this.selectedDeviceBackbone],this.makeToast(e.data.msg)):this.makeToast(e.data.msg,"danger")}).catch(e=>{console.log(e)})},openDevice(e){this.selectedDeviceBackbone=e,this.$store.commit("changeDeviceBackbone",Object.assign({},this.selectedDeviceBackbone)),this.getSnmpParameters(e)},saveDevice(){this.$axios.post("/adminarea/deviceBackbone/update",{deviceBackbone:this.selectedDeviceBackbone}).then(e=>{"OK"===e.data.status?(this.selectedDeviceBackbone=e.data.deviceBackbone,this.$store.commit("changeDeviceBackbone",Object.assign({},this.selectedDeviceBackbone)),this.makeToast(e.data.msg),this.getAllDevicesBackbone()):this.makeToast(e.data.msg,"danger")}).catch(e=>{console.log(e)})},deleteDevice(e){const t=confirm("Confermi la cancellazione?");t&&this.$axios.post("/adminarea/deviceBackbone/delete",{deviceBackbone:e}).then(e=>{"OK"===e.data.status?(this.selectedDeviceBackbone=e.data.deviceBackbone,this.$store.commit("changeDeviceBackbone",Object.assign({},this.selectedDeviceBackbone)),this.makeToast(e.data.msg),this.getAllDevicesBackbone()):this.makeToast(e.data.msg,"danger")}).catch(e=>{console.log(e)})},makeToast(e){this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:e})},exit(){this.$router.push("/AdminHome")}},computed:{monitorClassBackground(e){return e.state},classRowTableDevices(e){return e&&e.state?e.state:""}}}),o=c,n=(i("31f4"),i("2877")),l=i("eaac"),d=i("27f9"),r=i("0016"),b=i("bd08"),v=i("357e"),h=i("db86"),k=i("0378"),p=i("eebe"),m=i.n(p),u=Object(n["a"])(o,s,a,!1,null,null,null);t["default"]=u.exports;m()(u,"components",{QTable:l["a"],QInput:d["a"],QIcon:r["a"],QTr:b["a"],QTh:v["a"],QTd:h["a"],QForm:k["a"]})},fbb7:function(e,t,i){}}]);