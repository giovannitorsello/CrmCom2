(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"1bbb":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"serviceTemplate"}},[i("h6",{staticClass:"h4 text-gray-900 mb-4"},[e._v("Configurazione Modelli di Servizio")]),i("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:"/img/actions/new.png"},on:{click:function(t){return e.newServiceTemplate()}}}),i("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:"/img/actions/save.png"},on:{click:function(t){return e.saveServiceTemplate()}}}),i("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:"/img/actions/delete.png"},on:{click:function(t){return e.deleteServiceTemplate()}}}),i("q-form",{ref:"serviceForm",staticClass:"q-gutter-md"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Descrizione"},model:{value:e.selectedServiceTemplate.description,callback:function(t){e.$set(e.selectedServiceTemplate,"description",t)},expression:"selectedServiceTemplate.description"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Unità"},model:{value:e.selectedServiceTemplate.unit,callback:function(t){e.$set(e.selectedServiceTemplate,"unit",t)},expression:"selectedServiceTemplate.unit"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Intervallo fatturazione in giorni"},model:{value:e.selectedServiceTemplate.billingPeriod,callback:function(t){e.$set(e.selectedServiceTemplate,"billingPeriod",t)},expression:"selectedServiceTemplate.billingPeriod"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Prezzo"},model:{value:e.selectedServiceTemplate.price,callback:function(t){e.$set(e.selectedServiceTemplate,"price",t)},expression:"selectedServiceTemplate.price"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"IVA"},model:{value:e.selectedServiceTemplate.vat,callback:function(t){e.$set(e.selectedServiceTemplate,"vat",t)},expression:"selectedServiceTemplate.vat"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Giorni successivi all'invio fattura a partire dai quali viene prodotto l'avviso"},model:{value:e.selectedServiceTemplate.dayinvoicereminder,callback:function(t){e.$set(e.selectedServiceTemplate,"dayinvoicereminder",t)},expression:"selectedServiceTemplate.dayinvoicereminder"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Giorni invio preavviso mancato pagamento"},model:{value:e.selectedServiceTemplate.nopaydaysbeforedeactivation,callback:function(t){e.$set(e.selectedServiceTemplate,"nopaydaysbeforedeactivation",t)},expression:"selectedServiceTemplate.nopaydaysbeforedeactivation"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-input",{attrs:{label:"Giorni invio preavviso disattivazione dei servizi"},model:{value:e.selectedServiceTemplate.dayforexpirationwarning,callback:function(t){e.$set(e.selectedServiceTemplate,"dayforexpirationwarning",t)},expression:"selectedServiceTemplate.dayforexpirationwarning"}})],1)])]),i("q-table",{attrs:{data:e.serviceTemplates,columns:e.columnsTableServiceTemplates,pagination:e.initialPagination,filter:e.txtFilter},scopedSlots:e._u([{key:"top-right",fn:function(){return[i("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Ricerca"},model:{value:e.txtFilter,callback:function(t){e.txtFilter=t},expression:"txtFilter"}},[i("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"header",fn:function(t){return[i("q-tr",{attrs:{props:t}},[i("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(a){return i("q-th",{key:a.name,attrs:{props:t}},[e._v(e._s(a.label))])}))],2)]}},{key:"body",fn:function(t){return[i("q-tr",{class:t.row.state,attrs:{props:t}},[i("q-td",{attrs:{"auto-width":""}},[i("img",{staticStyle:{width:"32px",height:"32px",fill:"greenyellow"},attrs:{src:"/img/actions/open.png"},on:{click:function(i){return e.selectServiceTemplate(t.row)}}}),i("img",{staticStyle:{width:"32px",height:"32px",xfill:"green"},attrs:{src:"/img/actions/unlocked.png"},on:{click:function(i){return e.activateServiceTemplate(t.row)}}}),i("img",{staticStyle:{width:"32px",height:"32px",xfill:"red"},attrs:{src:"/img/actions/locked.png"},on:{click:function(i){return e.suspendServiceTemplate(t.row)}}}),i("img",{staticStyle:{width:"32px",height:"32px",xfill:"gray"},attrs:{src:"/img/actions/delete.png"},on:{click:function(i){return e.deleteServiceTemplate(t.row)}}})]),e._l(t.cols,(function(a){return i("q-td",{key:a.name,attrs:{props:t}},[e._v(e._s(a.value))])}))],2)]}}])})],1)},s=[],l=(i("a434"),i("2f62")),c={data(){return{selectedServiceTemplate:{},serviceTemplates:[],txtFilter:"",initialPagination:{sortBy:"desc",descending:!1,page:2,rowsPerPage:5},columnsTableServiceTemplates:[{name:"actions",label:"Azioni"},{name:"description",label:"Descrizione",field:"description",sortable:!0},{name:"code",label:"Codice",field:"code",sortable:!0},{name:"unit",label:"Unità",field:"unit",sortable:!0},{name:"price",label:"Prezzo",field:"price",sortable:!0},{name:"createdAt",label:"Data inserimento",field:"createdAt",sortable:!0},{name:"updatedAt",label:"Aggiornato il",field:"updatedAt",sortable:!0}]}},methods:{getServiceTemplateData:function(){console.log("Selected service template"),console.log(this.selectedServiceTemplate),this.getAllServiceTemplates()},getAllServiceTemplates:function(){this.$axios.post("/adminarea/serviceTemplate/getall",{}).then(e=>{"OK"===e.data.status&&(this.serviceTemplates=e.data.serviceTemplates,console.log(this.serviceTemplates),this.makeToast(e.data.msg))}).catch(e=>{console.log(e)})},newServiceTemplate:function(){this.selectedServiceTemplate.id=null,this.saveServiceTemplate()},saveServiceTemplate:function(){let e="";this.selectedServiceTemplate.id&&""!==this.selectedServiceTemplate.id?e="/adminarea/serviceTemplate/update":(e="/adminarea/serviceTemplate/insert",this.selectedServiceTemplate.state="active"),this.$axios.post(e,{serviceTemplate:this.selectedServiceTemplate}).then(t=>{"OK"===t.data.status&&(this.selectedServiceTemplate=t.data.serviceTemplate,this.$store.commit("changeServiceTemplate",Object.assign({},this.selectedServiceTemplate)),"/adminarea/serviceTemplate/insert"===e&&this.serviceTemplates.push(this.selectedServiceTemplate)),this.makeToast(t.data.msg)}).catch(e=>{console.log(e)})},selectServiceTemplate:function(e){this.selectedServiceTemplate=e,this.$store.commit("changeServiceTemplate",Object.assign({},this.selectedServiceTemplate))},deleteServiceTemplate:function(e){const t=confirm("Confermi la cancellazione?");if(t){this.$parent;this.$axios.post("/adminarea/serviceTemplate/delete",{serviceTemplate:e}).then(t=>{"OK"===t.data.status&&(this.serviceTemplates.forEach((t,i,a)=>{t.id===e.id&&this.serviceTemplates.splice(i,1)}),this.selectedServiceTemplate={},this.makeToast(t.data.msg))}).catch(e=>{console.log(e)})}},activateServiceTemplate:function(e){e.state="active",this.$axios.post("/adminarea/serviceTemplate/update",{serviceTemplate:e}).then(e=>{"OK"===e.data.status&&(this.selectedServiceTemplate=e.data.serviceTemplate,this.makeToast(e.data.msg))}).catch(e=>{console.log(e)})},suspendServiceTemplate:function(e){e.state="suspended",this.$axios.post("/adminarea/serviceTemplate/update",{serviceTemplate:e}).then(e=>{"OK"===e.data.status&&(this.selectedServiceTemplate=e.data.serviceTemplate,this.makeToast(e.data.msg))}).catch(e=>{console.log(e)})},exit:function(){this.$parent.$emit("selectedCustomer")},makeToast(e){this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:e})}},computed:Object(l["b"])({serviceTemplate:"serviceTemplate"}),created(){this.getServiceTemplateData()}},r=c,n=(i("fb81"),i("2877")),o=i("0378"),p=i("27f9"),d=i("eaac"),m=i("0016"),v=i("bd08"),u=i("357e"),T=i("db86"),h=i("eebe"),g=i.n(h),f=Object(n["a"])(r,a,s,!1,null,"718a0770",null);t["default"]=f.exports;g()(f,"components",{QForm:o["a"],QInput:p["a"],QTable:d["a"],QIcon:m["a"],QTr:v["a"],QTh:u["a"],QTd:T["a"]})},7774:function(e,t,i){},fb81:function(e,t,i){"use strict";var a=i("7774"),s=i.n(a);s.a}}]);