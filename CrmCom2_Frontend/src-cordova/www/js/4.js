(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0ac4":function(e,t,s){"use strict";var i=s("b9b6"),c=s.n(i);c.a},a47a:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"device"}},[s("h6",[e._v("\n    Gestione dispositivi\n    "),s("strong",[e._v(e._s(e.customerDescription))])]),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/new.png"},on:{click:e.newDevice}}),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/save.png"},on:{click:e.saveDevice}}),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/delete.png"},on:{click:e.deleteDevice}}),s("img",{class:e.monitorClassBackground,staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/eye.svg"},on:{click:e.monitorDevice}}),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:"/img/actions/exit.png"},on:{click:e.exit}}),s("q-form",{ref:"deviceForm",staticClass:"q-gutter-md"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.companyasset,expression:"companyasset"}],staticClass:"form-control form-control-user",attrs:{id:"companyasset",name:"companyasset",placeorder:"Tecnologia utilizzata","aria-label":"Tecnologia internet"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.companyasset=t.target.multiple?s:s[0]},e.initDeviceProperties]}},e._l(e.companyassets,(function(t){return s("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.company)+" ("+e._s(t.techasset)+")")])})),0)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"Descrizione"},model:{value:e.selectedDevice.description,callback:function(t){e.$set(e.selectedDevice,"description",t)},expression:"selectedDevice.description"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"Tipo"},model:{value:e.selectedDevice.type,callback:function(t){e.$set(e.selectedDevice,"type",t)},expression:"selectedDevice.type"}})],1),s("div",{staticClass:"col"}),s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"Produttore"},model:{value:e.selectedDevice.vendor,callback:function(t){e.$set(e.selectedDevice,"vendor",t)},expression:"selectedDevice.vendor"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"Modello"},model:{value:e.selectedDevice.model,callback:function(t){e.$set(e.selectedDevice,"model",t)},expression:"selectedDevice.model"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"MAC"},model:{value:e.selectedDevice.mac,callback:function(t){e.$set(e.selectedDevice,"mac",t)},expression:"selectedDevice.mac"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"ipv4"},model:{value:e.selectedDevice.ipv4,callback:function(t){e.$set(e.selectedDevice,"ipv4",t)},expression:"selectedDevice.ipv4"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"ipv6"},model:{value:e.selectedDevice.ipv6,callback:function(t){e.$set(e.selectedDevice,"ipv6",t)},expression:"selectedDevice.ipv6"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-input",{attrs:{label:"Note sul dispositivo",type:"textarea",rows:"5",cols:"20"},model:{value:e.selectedDevice.note,callback:function(t){e.$set(e.selectedDevice,"note",t)},expression:"selectedDevice.note"}})],1)])]),s("hr",{staticClass:"separator"}),e.selectedDevice?[s("h6",[e._v("Parametri generali")]),e.selectedDevice.objData?s("div",{attrs:{id:"deviceParametersPrimitives"}},e._l(e.objDataPrimitives,(function(t,i){return s("div",{key:t,staticClass:"row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-control form-control-user",attrs:{for:i}},[e._v(e._s(i))])]),s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDevice.objData[i],expression:"selectedDevice.objData[primitiveName]"}],staticClass:"form-control form-control-user",attrs:{id:i},domProps:{value:e.selectedDevice.objData[i]},on:{input:function(t){t.target.composing||e.$set(e.selectedDevice.objData,i,t.target.value)}}})])])})),0):e._e(),s("hr",{staticClass:"separator"}),s("h6",[e._v("Sezioni specifiche")]),e.selectedDevice.objData?s("div",{attrs:{id:"deviceParametersSections"}},e._l(e.objDataSection,(function(t,i,c){return s("div",{key:c},[s("h6",[s("p",{attrs:{align:"left"}},[e._v(e._s(i))])]),s("div",{staticClass:"row"},e._l(t,(function(t,c,a){return s("div",{key:a},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-control form-control-user",attrs:{for:c}},[e._v(e._s(c))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDevice.objData[i][c],expression:"selectedDevice.objData[sectionName][devPropertyName]"}],staticClass:"form-control form-control-user",attrs:{id:c},domProps:{value:e.selectedDevice.objData[i][c]},on:{input:function(t){t.target.composing||e.$set(e.selectedDevice.objData[i],c,t.target.value)}}})])])})),0),s("hr",{staticClass:"separator"})])})),0):e._e()]:e._e()],2)},c=[],a=s("2f62"),o=s("c933"),l={data(){return{companyassets:o,companyasset:{},selectedDevice:{},devices:{},objDataSection:{},objDataPrimitives:{}}},methods:{initDeviceProperties(){this.companyasset&&(this.objDataSection=[],this.objDataPrimitives=[],this.selectedDevice.objData=this.companyasset.propDeviceStructure,this.$store.commit("changeDeviceCustomer",this.selectedDevice),this.parseDeviceObjData(),console.log("Modify device structure"),console.log(this.selectedDevice))},getDeviceData:function(){this.selectedDevice=Object.assign({},this.$store.state.deviceCustomer),null===this.selectedDevice&&(this.selectedDevice={objData:{}}),null===this.selectedDevice.objData&&(this.selectedDevice={objData:{}}),this.$store.commit("changeDeviceCustomer",this.selectedDevice),this.companyassets.forEach(e=>{e.company===this.selectedDevice.companyasset&&e.techasset===this.selectedDevice.techasset&&(this.companyasset=e)}),this.parseDeviceObjData()},parseDeviceObjData:function(){if(this.selectedDevice&&this.selectedDevice.id&&this.selectedDevice.objData)for(const e in this.selectedDevice.objData)"object"===typeof this.selectedDevice.objData[e]?this.objDataSection[e]=this.selectedDevice.objData[e]:this.objDataPrimitives[e]=this.selectedDevice.objData[e]},newDevice(){this.selectedDevice={},this.$store.commit("changeDeviceCustomer",this.selectedDevice),this.makeToast("Configura un nuovo dispositivo")},saveDevice:function(){this.selectedDevice.companyasset=this.companyasset.company,this.selectedDevice.techasset=this.companyasset.techasset,this.selectedDevice.state="active",this.selectedDevice.contractId=this.contract.id,this.$axios.post("/adminarea/deviceCustomer/update",{device:this.selectedDevice}).then(e=>{"OK"===e.data.status&&(this.selectedDevice=e.data.deviceCustomer,this.$store.commit("changeDeviceCustomer",this.selectedDevice),this.makeToast(e.data.msg))}).catch(e=>{console.log(e)})},deleteDevice:function(){const e=confirm("Confermi la cancellazione?");e&&this.$axios.post("/adminarea/deviceCustomer/delete",{device:this.selectedDevice}).then(e=>{"OK"===e.data.status&&(this.selectedDevice=e.data.deviceCustomer,this.$store.commit("changeDeviceCustomer",this.selectedDevice),this.makeToast(e.data.msg),this.exit())}).catch(e=>{console.log(e)})},exit:function(){this.$router.push("/Contract")},monitorDevice(){this.selectedDevice=Object.assign({},this.$store.state.deviceCustomer),this.selectedDevice&&("monitored"!==this.selectedDevice.monitored?this.selectedDevice.monitored="monitored":this.selectedDevice.monitored="",this.saveDevice())},makeToast(e){this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:e})}},computed:Object(a["b"])({user:"user",customer:"customer",contract:"contract",service:"service",device:"device",customerDescription(){const e=this.customer;return e.vatcode&&""!==e.vatcode?e.company:e.lastname+" "+e.firstname},monitorClassBackground(){return this.selectedDevice.monitored}}),mounted(){this.getDeviceData()}},r=l,n=(s("0ac4"),s("2877")),d=s("0378"),v=s("27f9"),m=s("eebe"),p=s.n(m),D=Object(n["a"])(r,i,c,!1,null,"9471be74",null);t["default"]=D.exports;p()(D,"components",{QForm:d["a"],QInput:v["a"]})},b9b6:function(e,t,s){},c933:function(e){e.exports=JSON.parse('[{"id":1,"company":"WIFINETCOM SRL","techasset":"WIFI","propDeviceStructure":{"firmware_version":"","wifi":{"ssid":"","password":"","security-type":""},"bandwith":{"download_min":"","download_max":"","upload_min":"","upload_max":""}}},{"id":2,"company":"TIM EASY IP","techasset":"FTTC","propDeviceStructure":{"firmware_version":"","ppoe":{"username":"","password":"","network":"","ip":""}}},{"id":3,"company":"TIM EASY ADSL","techasset":"FTTC","propDeviceStructure":{"firmware_version":"","ppoe":{"username":"","password":"","network":"","ip":""}}}]')}}]);