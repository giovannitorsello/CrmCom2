(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"236a":function(t,e,a){"use strict";a("cd32")},6803:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"contracts"}},[s("p",[t._v("\n    Gestione "),s("strong",[t._v(t._s(t.customerDescription))]),s("br"),t.contract?s("span",[t._v("Contratto: "+t._s(t.contract.description))]):t._e(),s("br"),t.selectedService?s("span",[t._v("Servizio: "+t._s(t.selectedService.description))]):t._e(),s("br"),t.selectedDevice?s("span",[t._v("Dispositivo: "+t._s(t.selectedDevice.description)+" -- "+t._s(t.selectedDevice.ipv4)+" -- "+t._s(t.selectedDevice.ipv6))]):t._e(),s("br")]),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a("f32a")},on:{click:t.newContract}}),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a("40b4")},on:{click:t.saveContract}}),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a("c8ed")},on:{click:t.deleteContract}}),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a("5df3")},on:{click:t.exit}}),s("img",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a("9ee3")},on:{click:t.printContract}}),s("ValidationObserver",{ref:"FormDeviceCustomer"},[s("q-form",{ref:"contractForm",staticClass:"q-gutter-md"},[s("q-tabs",{staticClass:"text-teal",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab",{attrs:{name:"general",icon:"article",label:"Generale"}}),s("q-tab",{attrs:{name:"services",icon:"euro_symbol",label:"Servizi"}}),s("q-tab",{attrs:{name:"documents",icon:"card_membership",label:"Documenti"}}),s("q-tab",{attrs:{name:"invoice",icon:"receipt",label:"Fatturazione"}}),s("q-tab",{attrs:{name:"devices",icon:"router",label:"Dispositivi"}})],1),s("q-separator"),s("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab-panel",{attrs:{name:"general"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("ValidationProvider",{attrs:{name:"Descrizione",immediate:"",rules:"required|alpha_spaces"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Descrizione"},model:{value:t.selectedContract.description,callback:function(e){t.$set(t.selectedContract,"description",e)},expression:"selectedContract.description"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])}),s("ValidationProvider",{attrs:{name:"Indirizzo",immediate:"",rules:"required|address"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Indirizzo",change:t.changeAddress()},model:{value:t.selectedContract.address,callback:function(e){t.$set(t.selectedContract,"address",e)},expression:"selectedContract.address"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("ValidationProvider",{attrs:{name:"Data inizio",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",mask:"####-##-##"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{locale:t.calendarLocale,mask:"YYYY-MM-DD"},on:{input:t.calculateDays},model:{value:t.selectedContract.startdate,callback:function(e){t.$set(t.selectedContract,"startdate",e)},expression:"selectedContract.startdate"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!0),model:{value:t.selectedContract.startdate,callback:function(e){t.$set(t.selectedContract,"startdate",e)},expression:"selectedContract.startdate"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])}),s("ValidationProvider",{attrs:{name:"Data fine",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",mask:"####-##-##"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{locale:t.calendarLocale,mask:"YYYY-MM-DD"},on:{input:t.calculateDays},model:{value:t.selectedContract.enddate,callback:function(e){t.$set(t.selectedContract,"enddate",e)},expression:"selectedContract.enddate"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!0),model:{value:t.selectedContract.enddate,callback:function(e){t.$set(t.selectedContract,"enddate",e)},expression:"selectedContract.enddate"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])}),s("ValidationProvider",{attrs:{name:"Durata in giorni",immediate:"",rules:"integer"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Durata in giorni",disable:""},model:{value:t.selectedContract.duration,callback:function(e){t.$set(t.selectedContract,"duration",e)},expression:"selectedContract.duration"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("ValidationProvider",{attrs:{name:"Rinnovo automatico",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-checkbox",{attrs:{label:"Rinnovo Automatico"},model:{value:t.selectedContract.automaticrenew,callback:function(e){t.$set(t.selectedContract,"automaticrenew",e)},expression:"selectedContract.automaticrenew"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])}),s("ValidationProvider",{attrs:{name:"Da Fatturare",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-checkbox",{attrs:{label:"Da fatturare"},model:{value:t.selectedContract.businessflag,callback:function(e){t.$set(t.selectedContract,"businessflag",e)},expression:"selectedContract.businessflag"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])})],1)])]),s("q-tab-panel",{attrs:{name:"services"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-select",{attrs:{filled:"",label:"Categoria",options:t.serviceCategories,"map-options":"","option-label":"description"},on:{input:t.changeCategory},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}}),s("q-select",{attrs:{filled:"",label:"Modelli di servizio",options:t.serviceTemplates,"option-label":"description","emit-value":"","map-options":""},model:{value:t.selectedServiceTemplate,callback:function(e){t.selectedServiceTemplate=e},expression:"selectedServiceTemplate"}}),s("div",{staticClass:"col"},[s("img",{staticStyle:{width:"32px",height:"32px",xfill:"greenyellow"},attrs:{src:a("f32a"),alt:"seleziona"},on:{click:function(e){return t.addService()}}})])],1)]),t.services?s("div",[s("q-table",{attrs:{title:"Servizi associati al contratto",data:t.services,columns:t.columnsTableServices,"row-key":"id","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header",fn:function(e){return[s("q-tr",{attrs:{props:e}},[s("q-th",{attrs:{"auto-width":""}}),t._l(e.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:e}},[t._v(t._s(a.label))])}))],2)]}},{key:"body",fn:function(e){return[s("q-tr",{class:e.row.state,attrs:{props:e},nativeOn:{click:function(a){return t.selectService(e.row)}}},[s("q-td",{attrs:{"auto-width":""}},[s("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:a("d8f6")},on:{click:function(a){return t.openService(e.row)}}}),s("img",{staticStyle:{width:"32px",height:"32px",xfill:"green"},attrs:{src:a("a3a3")},on:{click:function(a){return t.activateService(e.row)}}}),s("img",{staticStyle:{width:"32px",height:"32px",xfill:"red"},attrs:{src:a("9b70")},on:{click:function(a){return t.suspendService(e.row)}}}),s("img",{staticStyle:{width:"32px",height:"32px",xfill:"gray"},attrs:{src:a("c8ed")},on:{click:function(a){return t.deleteService(e.row)}}})]),t._l(e.cols,(function(a){return s("q-td",{key:a.name,attrs:{props:e}},[t._v(t._s(a.value))])}))],2)]}}],null,!1,2384751767)})],1):t._e()]),s("q-tab-panel",{attrs:{name:"documents"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("ValidationProvider",{attrs:{name:"Numero documento",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Numero documento"},model:{value:t.selectedCustomer.numci,callback:function(e){t.$set(t.selectedCustomer,"numci",e)},expression:"selectedCustomer.numci"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-btn",{staticStyle:{width:"300px"},attrs:{color:"primary",label:"Carta identità retro (camera)"},on:{click:t.captureCiFront}},[s("img",{staticStyle:{width:"100px"},attrs:{src:t.imageCiFront}})]),s("q-uploader",{staticStyle:{"max-width":"300px"},attrs:{"auto-upload":"",factory:t.uploadCiFront,accept:".jpg","max-file-size":"2048000",label:"Acquisizione da file (solo jpg)"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-btn",{staticStyle:{width:"300px"},attrs:{color:"primary",label:"Carta identità retro (camera)"},on:{click:t.captureCiBack}},[s("img",{staticStyle:{width:"100px"},attrs:{src:t.imageCiBack}})]),s("q-uploader",{staticStyle:{"max-width":"300px"},attrs:{"auto-upload":"",factory:t.uploadCiBack,accept:".jpg","max-file-size":"2048000",label:"Acquisizione da file (solo jpg)"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("ValidationProvider",{attrs:{name:"Codice fiscale",immediate:"",rules:"required|codfis"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Codice fiscale",type:"codfis"},model:{value:t.selectedCustomer.codfis,callback:function(e){t.$set(t.selectedCustomer,"codfis",e)},expression:"selectedCustomer.codfis"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-btn",{staticStyle:{width:"300px"},attrs:{color:"primary",label:"Codice fiscale fronte (camera)"},on:{click:t.captureCfFront}},[s("img",{staticStyle:{width:"100px"},attrs:{src:t.imageCfFront}})]),s("q-uploader",{staticStyle:{"max-width":"300px"},attrs:{"auto-upload":"",factory:t.uploadCfFront,"max-file-size":"2048000",accept:".jpg",label:"Acquisizione da file (solo jpg)"}})],1)]),s("div",{staticClass:"row",staticStyle:{with:"100%"}},[s("div",{staticClass:"col"},[s("q-btn",{staticStyle:{width:"300px"},attrs:{color:"primary",label:"Codice fiscale retro (camera)"},on:{click:t.captureCfBack}},[s("img",{staticStyle:{width:"100px"},attrs:{src:t.imageCfBack}})]),s("q-uploader",{staticStyle:{"max-width":"300px"},attrs:{"auto-upload":"",factory:t.uploadCfBack,"max-file-size":"2048000",accept:".jpg",label:"Acquisizione da file (solo jpg)"}})],1)])]),s("q-tab-panel",{attrs:{name:"invoice"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("ValidationProvider",{attrs:{name:"Indirizzo completo di fatturazione",immediate:"",rules:"required|address"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Indirizzo completo di fatturazione"},model:{value:t.selectedContract.invoiceAddress,callback:function(e){t.$set(t.selectedContract,"invoiceAddress",e)},expression:"selectedContract.invoiceAddress"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])}),s("ValidationProvider",{attrs:{name:"Città indirizzo fatturazione",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Città indirizzo fatturazione"},model:{value:t.selectedContract.invoiceCity,callback:function(e){t.$set(t.selectedContract,"invoiceCity",e)},expression:"selectedContract.invoiceCity"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])}),s("ValidationProvider",{attrs:{name:"CAP indirizzo fatturazione",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"CAP indirizzo fatturazione"},model:{value:t.selectedContract.invoiceCAP,callback:function(e){t.$set(t.selectedContract,"invoiceCAP",e)},expression:"selectedContract.invoiceCAP"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])}),s("ValidationProvider",{attrs:{name:"Provincia indirizzo fatturazione",immediate:"",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{label:"Provincia indirizzo fatturazione"},model:{value:t.selectedContract.invoiceProvince,callback:function(e){t.$set(t.selectedContract,"invoiceProvince",e)},expression:"selectedContract.invoiceProvince"}}),s("span",{staticClass:"error"},[t._v(t._s(a[0]))])]}}])})],1)])]),s("q-tab-panel",{attrs:{name:"devices"}},[t.devices?s("div",[s("q-btn",{on:{click:t.addDevice}},[t._v("Aggiungi dispositivo")]),s("q-table",{attrs:{title:"Dispositivi associati al contratto",data:t.devices,columns:t.columnsTableDevices,"row-key":"id","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header",fn:function(e){return[s("q-tr",{attrs:{props:e}},[s("q-th",{attrs:{"auto-width":""}}),t._l(e.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:e}},[t._v(t._s(a.label))])}))],2)]}},{key:"body",fn:function(e){return[s("q-tr",{class:e.row.state,attrs:{props:e},nativeOn:{click:function(a){return t.selectDevice(e.row)}}},[s("q-td",{attrs:{"auto-width":""}},[s("img",{staticStyle:{width:"32px",height:"32px"},attrs:{src:a("d8f6")},on:{click:function(a){return t.openDevice(e.row)}}}),s("img",{staticStyle:{width:"32px",height:"32px",xfill:"green"},attrs:{src:a("a3a3")},on:{click:function(a){return t.activateDevice(e.row)}}}),s("img",{staticStyle:{width:"32px",height:"32px",xfill:"red"},attrs:{src:a("9b70")},on:{click:function(a){return t.suspendDevice(e.row)}}}),s("img",{staticStyle:{width:"32px",height:"32px",xfill:"gray"},attrs:{src:a("c8ed")},on:{click:function(a){return t.deleteDevice(e.row)}}})]),t._l(e.cols,(function(a){return s("q-td",{key:a.name,attrs:{props:e}},[t._v(t._s(a.value))])}))],2)]}}],null,!1,3862016082)})],1):t._e()])],1)],1)],1)],1)},i=[],o=(a("e01a"),a("2f62")),c=a("4360"),r=a("81c3");const{Camera:n}=r["b"];var l={data(){return{tab:"general",contractDocumentUrl:"",serviceCategories:[],selectedCategory:{description:"Vuoto",id:"0"},selectedCustomer:{},selectedContract:{},selectedService:{},selectedDevice:{},selectedServiceTemplate:{description:"Vuoto",id:"0"},contracts:[],devices:[],services:[],serviceTemplates:[],imageCfFront:"",imageCfBack:"",imageCiFront:"",imageCiBack:"",optionsServiceTemplates:[],pagination:{rowsPerPage:0},columnsTableServices:[{name:"actions",label:"Azioni"},{name:"state",label:"Stato",field:t=>t.state,sortable:!0},{name:"description",label:"Descrizione",field:t=>t.description,sortable:!0},{name:"price",label:"Prezzo",field:t=>t.price},{name:"vat",label:"IVA",field:t=>t.vat}],columnsTableDevices:[{name:"actions",label:"Azioni"},{name:"Stato",label:"state",field:t=>"monitored"===t.monitored?t.state+" ("+t.monitored+")":t.state},{name:"description",label:"Descrizione",field:t=>t.description,sortable:!0},{name:"asset",label:"Asset",field:t=>t.companyasset+"("+t.techasset+")",sortable:!0},{name:"type",label:"Tipologia",field:t=>t.type,sortable:!0},{name:"model",label:"Modello",field:t=>t.model,sortable:!0},{name:"ipv4",label:"Ip",field:t=>t.ipv6?t.ipv4+" --- "+t.ipv6:t.ipv4,sortable:!0},{name:"mac",label:"Mac",field:t=>t.mac}],calendarLocale:{days:"Domenica_Linedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),daysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),months:"Gennaio_Febbraio_Marzo_Aprile_Maggio_Giugno_Luglio_Agosto_Settembre_Ottobre_Novembre_Dicembre".split("_"),monthsShort:"Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),firstDayOfWeek:1}}},methods:{calculateDays(){if(this.selectedContract.startdate&&this.selectedContract.enddate){var t=this.selectedContract.startdate.split("-"),e=this.selectedContract.enddate.split("-"),a=new Date(t[0],t[1]-1,t[2]),s=(e=new Date(e[0],e[1]-1,e[2]),e.getTime()-a.getTime());this.selectedContract.duration=Math.ceil(s/864e5)}},initContractData(){this.services=[],this.devices=[],this.selectedContract.description="Internet Home",this.selectedContract.duration=365,this.selectedContract.automaticrenew=!0,this.selectedContract.businessflag=!0,this.selectedContract.address=this.selectedCustomer.address,this.selectedContract.invoiceAddress=this.selectedCustomer.address,this.selectedContract.invoiceCity=this.selectedCustomer.city,this.selectedContract.invoiceCAP=this.selectedCustomer.postalcode,this.selectedContract.invoiceProvince="LE",this.selectedCustomer.vatcode&&(this.selectedContract.description="Internet Businness",this.selectedContract.address=this.selectedCustomer.companyaddress,this.selectedContract.invoiceAddress=this.selectedCustomer.companyaddress,this.selectedContract.invoiceCity=this.selectedCustomer.city,this.selectedContract.invoiceCAP=this.selectedCustomer.postalcode)},getContractData(){this.$store;this.selectedCustomer=Object.assign({},this.$store.state.customer),this.selectedContract=Object.assign({},this.$store.state.contract),this.getAllServiceCategories(),this.getServiceTemplates(),this.getContractServices(),this.getContractDevices(),this.selectedContract.id||this.initContractData(),console.log(this.selectedContract)},printContract:function(){this.$store.commit("changeCustomer",this.selectedCustomer),this.$store.commit("changeContract",this.selectedContract),this.$axios.post("/adminarea/registration/generate_final_document",{customer:this.selectedCustomer,contract:this.selectedContract,services:this.services}).then((t=>{"OK"===t.data.status&&(this.contractDocumentUrl=t.data.results.urlFinalDocument,console.log(this.contractDocumentUrl),window.open(this.contractDocumentUrl),this.makeToast(t.data.msg))})).catch((t=>{console.log(t),this.makeToast("Si è verificato un errore")}))},changeCategory:function(){this.$store;console.log(this.selectedCategory),this.$axios.post("/adminarea/serviceTemplate/getByCategory",{category:this.selectedCategory}).then((t=>{"OK"===t.data.status&&(this.serviceTemplates=t.data.serviceTemplates)})).catch((t=>{console.log(t)}))},getAllServiceCategories:function(){this.$axios.post("/adminarea/serviceTemplate/getAllServiceCategories",{}).then((t=>{"OK"===t.data.status&&(this.serviceCategories=t.data.serviceCategories,this.makeToast(t.data.msg))})).catch((t=>{console.log(t)}))},getServiceTemplates(){this.$store;this.$axios.post("/adminarea/serviceTemplate/getall",{}).then((t=>{t.data.status})).catch((t=>{console.log(t)}))},getContractServices(){this.$store,this.$parent;this.$axios.post("/adminarea/contractService/get_all_by_contract",{idContract:this.selectedContract.id}).then((t=>{"OK"===t.data.status&&(this.services=t.data.services)})).catch((t=>{console.log(t)}))},getContractDevices(){this.$store,this.$parent;this.$axios.post("/adminarea/deviceCustomer/get_all_by_contract",{idContract:this.selectedContract.id}).then((t=>{"OK"===t.data.status&&(this.devices=t.data.devicesCustomer)})).catch((t=>{console.log(t)}))},addService(){this.selectedContract.id||this.makeToastError("Salva il contratto prima di aggiungere i servizi.");var t=this.selectedServiceTemplate.id;t&&this.selectedContract.id&&this.$axios.post("/adminarea/contractService/insert",{idServiceTemplate:t,idContract:this.selectedContract.id}).then((t=>{"OK"===t.data.status&&(this.selectedService=t.data.service,this.$store.commit("changeService",this.selectedService),this.makeToast(t.data.msg),this.services.push(this.selectedService),this.getContractServices())})).catch((t=>{console.log(t)}))},openService(t){console.log(t),this.selectedService=t,this.$store.commit("changeService",t),this.$router.push("/ServiceContract")},selectService(t){console.log(t),this.selectedService=t,this.$store.commit("changeService",t)},activateService(t){t.state="active",this.$axios.post("/adminarea/contractService/update",{service:t}).then((t=>{"OK"===t.data.status&&this.makeToast("Servizio attivo")})).catch((t=>{console.log(t)}))},suspendService(t){t.state="suspended",this.$axios.post("/adminarea/contractService/update",{service:t}).then((t=>{"OK"===t.data.status&&this.makeToast("Servizio sospeso")})).catch((t=>{console.log(t)}))},deleteService(t){const e=confirm("Confermi la cancellazione?");e&&this.$axios.post("adminarea/contractService/delete",{idContractService:t.id}).then((t=>{"OK"===t.data.status&&(this.makeToast("Servizio eliminato"),this.$store.commit("changeService",{}),this.getContractServices())})).catch((t=>{console.log(t)}))},openDevice(t){t.state="active",this.selectedDevice=t,this.$store.commit("changeDeviceCustomer",this.selectedDevice),this.$router.push("/DeviceCustomer")},selectDevice(t){this.selectedDevice=t,this.$store.commit("changeDeviceCustomer",this.selectedDevice)},activateDevice(t){t.state="active",this.$axios.post("/adminarea/deviceCustomer/update",{device:t}).then((e=>{"OK"===e.data.status&&(this.makeToast("Dispositivo attivo"),this.$axios.post("/adminarea/deviceCustomer/enable",{device:t}).then((t=>{"OK"===t.data.status?this.makeToast("Dispositivo abilitato nel firewall"):this.makeToast(t.data.msg)})).catch((t=>{console.log(t),this.makeToast("Errore di comunicazione con il firewall")})))})).catch((t=>{console.log(t)}))},suspendDevice(t){t.state="suspended",this.$axios.post("/adminarea/deviceCustomer/update",{device:t}).then((e=>{"OK"===e.data.status&&(this.makeToast("Dispositivo sospeso"),this.$axios.post("/adminarea/deviceCustomer/disable",{device:t}).then((t=>{"OK"===t.data.status?this.makeToast("Dispositivo disabilitato nel firewall"):this.makeToast(t.data.msg)})).catch((t=>{console.log(t),this.makeToast("Errore di comunicazione con il firewall")})))})).catch((t=>{console.log(t)}))},addDevice(){this.selectedService&&this.selectedService.id&&0!==this.selectedService.id&&"0"!==this.selectedService.id?(this.$store.commit("changeContract",this.selectedContract),this.$store.commit("changeDeviceCustomer",{}),this.$router.push("/DeviceCustomer")):(this.makeToastError("Servizio non selezionato, torna alla schermata servizi del contratto."),this.makeToastError("Associare il dispositivo ad un servizio"))},deleteDevice(t){const e=confirm("Confermi la cancellazione?");e&&this.$axios.post("/adminarea/deviceCustomer/delete",{device:t}).then((t=>{"OK"===t.data.status&&(this.selectedDevice={},this.$store.commit("changeDeviceCustomer",{}),this.makeToast(t.data.msg),this.getContractDevices())})).catch((t=>{console.log(t)}))},async newContract(){this.initContractData(),this.selectedContract.id=null,this.makeToast("Nuovo contratto, compila, salva ed aggiungi i servizi.")},async saveContract(){this.selectedContract.id&&null!==this.selectedContract.id?this.selectedContract.id&&0!==this.selectedContract.id&&"0"!==this.selectedContract.id&&(this.selectedContract.customerId=this.selectedCustomer.id,this.$axios.post("/adminarea/contract/update",{contract:this.selectedContract}).then((t=>{"OK"===t.data.status&&(this.selectedContract=t.data.contract,this.$store.commit("changeContract",this.selectedContract),this.makeToast(t.data.msg),this.getContractData())})).catch((t=>{this.makeToast("Error on save contract."),console.log(t)}))):(this.selectedContract.customerId=this.selectedCustomer.id,this.$axios.post("/adminarea/contract/insert",{contract:this.selectedContract}).then((t=>{"OK"===t.data.status?(this.$store.commit("changeContract",t.data.contract),this.selectedContract={},this.makeToast(t.data.msg),this.getContractData(),this.makeToast("New contract.")):this.makeToastError(t.data.msg)})).catch((t=>{console.log(t),this.makeToast("Error in contract insert.")})))},deleteContract:function(){const t=confirm("Confermi la cancellazione?");t&&this.$axios.post("adminarea/contract/delete",{contract:this.selectedContract}).then((t=>{"OK"===t.data.status&&(this.selectedContract=t.data.contract,this.$store.commit("changeContract",this.selectedContract),this.makeToast(t.data.msg),this.getContractData())})).catch((t=>{this.makeToast("Error on delete contract."),console.log(t)}))},captureCiFront(){n.getPhoto({width:600,height:350,quality:100,allowEditing:!0,resultType:r["a"].base64}).then((t=>{this.imageCiFront="data:image/png;base64, "+t.base64String,this.uploadIdentityDocumentImage("CiFront-"+this.uuid,t.base64String)})).catch((t=>console.log("No image: "+t)))},captureCiBack(){n.getPhoto({width:600,height:350,quality:100,allowEditing:!0,resultType:r["a"].base64}).then((t=>{this.imageCiBack="data:image/png;base64, "+t.base64String,this.uploadIdentityDocumentImage("CiBack-"+this.uuid,t.base64String)})).catch((t=>console.log("No image: "+t)))},captureCfFront(){n.getPhoto({width:600,height:350,quality:100,allowEditing:!0,resultType:r["a"].base64}).then((t=>{this.imageCfFront="data:image/png;base64, "+t.base64String,this.uploadIdentityDocumentImage("CfFront-"+this.uuid,t.base64String)})).catch((t=>console.log("No image: "+t)))},captureCfBack(){n.getPhoto({width:600,height:350,quality:100,allowEditing:!0,resultType:r["a"].base64}).then((t=>{this.imageCfBack="data:image/png;base64, "+t.base64String,this.uploadIdentityDocumentImage("CfBack-"+this.uuid,t.base64String)})).catch((t=>console.log("No image: "+t)))},uploadCiFront(t){let e="CiFront-"+this.selectedContract.uid+".jpg";this.uploadIdentityDocumentFile(e,t)},uploadCiBack(t){let e="CiBack-"+this.selectedContract.uuid+".jpg";this.uploadIdentityDocumentFile(e,t)},uploadCfFront(t){let e="CfFront-"+this.selectedContract.uuid+".jpg";this.uploadIdentityDocumentFile(e,t)},uploadCfBack(t){let e="CfBack-"+this.selectedContract.uuid+".jpg";this.uploadIdentityDocumentFile(e,t)},uploadIdentityDocumentImage(t,e){let a=new FormData;a.append("imageName",t),a.append("file",e),this.$axios.post("/adminarea/upload/identity_document/image",a,{header:{"Content-Type":"image/png"}}).then((t=>{"OK"===t.data.status&&this.makeToast(t.data.msg)})).catch((t=>{console.log(t),this.makeToast("Si è verificato un errore")}))},uploadIdentityDocumentFile(t,e){let a=new FormData;a.append("fileName",t),a.append("file",e[0]),this.$axios.post("/adminarea/upload/identity_document/file",a,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{"OK"===t.data.status&&this.makeToast(t.data.msg)})).catch((t=>{console.log(t),this.makeToast("Si è verificato un errore")}))},exit:function(){this.$store.commit("changeContract",{}),this.$store.commit("changeService",{}),this.$store.commit("changeDeviceCustomer",{}),this.$router.push("/Customer")},makeToast(t){this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:t})},makeToastError(t){this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:t})},changeAddress(){this.selectedContract.invoiceAddress=this.selectedContract.address}},computed:Object(o["b"])({user:"user",customer:"customer",contract:"contract",service:"service",device:"device",customerDescription(){const t=this.customer;return t.vatcode&&""!==t.vatcode?t.company:t.lastname+" "+t.firstname}}),mounted(){this.getContractData()},created(){},beforeRouteEnter(t,e,a){var s=c["a"].state.user;"admin"===s.role||"manager"===s.role||"technician"===s.role?a():a("/Login")}},d=l,u=(a("236a"),a("2877")),m=a("0378"),p=a("429b"),h=a("7460"),v=a("eb85"),C=a("adad"),g=a("823b"),f=a("27f9"),b=a("0016"),S=a("7cbe"),A=a("52ee"),y=a("9c40"),k=a("8f8e"),w=a("ddd8"),D=a("eaac"),x=a("bd08"),q=a("357e"),z=a("db86"),T=a("ee89"),F=a("7f67"),_=a("eebe"),M=a.n(_),P=Object(u["a"])(d,s,i,!1,null,"cfde9192",null);e["default"]=P.exports;M()(P,"components",{QForm:m["a"],QTabs:p["a"],QTab:h["a"],QSeparator:v["a"],QTabPanels:C["a"],QTabPanel:g["a"],QInput:f["a"],QIcon:b["a"],QPopupProxy:S["a"],QDate:A["a"],QBtn:y["a"],QCheckbox:k["a"],QSelect:w["a"],QTable:D["a"],QTr:x["a"],QTh:q["a"],QTd:z["a"],QUploader:T["a"]}),M()(P,"directives",{ClosePopup:F["a"]})},"9ee3":function(t,e){t.exports="data:image/png;base64,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"},cd32:function(t,e,a){}}]);