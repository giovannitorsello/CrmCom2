(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"013f":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"absolute-center q-pa-md",staticStyle:{"max-width":"400px",},attrs:{id:"login"}},[s("q-form",{ref:"loginForm",staticClass:"q-gutter-md",on:{submit:e.onSubmit,reset:e.onReset}},[s("q-input",{attrs:{label:"Nome utente",type:"text","lazy-rules":"",rules:[function(e){return e&&e.length>0}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("q-input",{attrs:{label:"Password",type:"password","lazy-rules":"",rules:[function(e){return e&&e.length>0}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("div",[s("q-btn",{attrs:{label:"Login",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],1)],1)},i=[],r=s("2f62"),n={data(){return{username:"admin",password:"admin",accept:!1}},methods:{onSubmit(){this.$refs.loginForm.validate().then((e=>{e?this.login():this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Inserisci le credenziali di accesso"})}))},onReset(){this.username=null,this.password=null,this.accept=!1,this.$refs.loginForm.resetValidation()},login(){const e=this.$store;this.$axios.post("/adminarea/login",{username:this.username,password:this.password}).then((t=>{if("OK"===t.data.status){const s=t.data.user;e.commit("changeUser",t.data.user),this.initSession(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Avvio connessione"}),"admin"==s.role&&this.$router.push("/MainLayout"),"manager"==s.role&&this.$router.push("/MainLayout"),"technician"==s.role&&this.$router.push("/MainLayout"),"installer"==s.role&&this.$router.push("/MainLayout"),"seller"==s.role&&this.$router.push("/MainLayout")}else this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Credenziali errate"})})).catch((function(e){console.log(e),this.$q.notify({color:"red-5",textColor:"white",icon:"error",message:"Il server non risponde"})}))},initSession(){this.$store.commit("changeCustomer",{}),this.$store.commit("changeContract",{}),this.$store.commit("changeService",{}),this.$store.commit("changeServiceTemplate",{}),this.$store.commit("changeInvoice",{}),this.$store.commit("changeInvoiceEntry",{}),this.$store.commit("changeDeviceCustomer",{}),this.$store.commit("changeDeviceBackbone",{}),this.$store.commit("changeSiteBackbone",{})}},computed:Object(r["b"])({user:"user"})},a=n,c=(s("da41"),s("2877")),l=s("0378"),u=s("27f9"),m=s("9c40"),h=s("eebe"),d=s.n(h),p=Object(c["a"])(a,o,i,!1,null,null,null);t["default"]=p.exports;d()(p,"components",{QForm:l["a"],QInput:u["a"],QBtn:m["a"]})},da41:function(e,t,s){"use strict";s("e196")},e196:function(e,t,s){}}]);